webpackJsonp([3],{5:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;t.AJAX_TEST="AJAX_TEST",t.TEST_API="http://wx.redtravel.cn",t.PAGE_DONE="PAGE_DONE",t.GET_MORE="GET_MORE",t.CAT_MORE="CAT_MORE",t.SCROLL_UP="SCROLL_UP",t.GET_DETAIL="GET_DETAIL",t.SEARCH_DONE="SEARCH_DONE",t.SHOW_SEARCH="SHOW_SEARCH",t.DEL_INDENT="DEL_INDENT",t.GO_INDENT="GO_INDENT",t.ADD_AMOUNT="ADD_AMOUNT",t.MINUS_AMOUNT="MINUS_AMOUNT",t.ORDER_TO_PAY="ORDER_TO_PAY",t.GET_COUPONS="GET_COUPONS",t.GET_ORDER_LIST="GET_ORDER_LIST",t.ORDER_DETAIL="ORDER_DETAIL",t.DO_SORT="DO_SORT",t.APPID="wx8f2d4ba8d79914d1",t.GET_KEYWORD="GET_KEYWORD",t.CLEAR_PRODUCT="CLEAR_PRODUCT",t.BIND_COUPONS="BIND_COUPONS",t.GET_HISTORY="GET_HISTORY";r="http://iapi.putike.cn";t.KEYWORD_URL=r+"/index/api?method=product&action=hotkeyword",t.COUPONS_URL=r+"/index/api?method=user&action=ticketlist",t.ORDER_LIST=r+"/index/api?method=user&action=orderlist",t.BIND_COUPONS_URL=r+"/index/api?method=user&action=bind_coupons",t.PAY_URL=r+"/index/api?method=order&action=detail",t.SEARCH_URL=r+"/index/api?method=product&action=index&page=",t.PRODUCTS_URL=r+"/index/api?method=product&action=index&page=",t.DETAIL_URL=r+"/index/api?method=product&action=detail",t.INDEX_API=r+"/index/api?"},9:function(e,t,r){r(12),e.exports=self.fetch.bind(self)},12:function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)}function u(e){var t=new FileReader;return t.readAsText(e),i(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob?(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=a(this);return e?e:Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function c(e,t){t=t||{};var r=t.body;if(c.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function p(e){var t=new o,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];h.redirect=function(e,t){if(-1===y.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=c,e.Response=h,e.fetch=function(e,t){return new Promise(function(r,n){function o(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var a;a=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);var i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:p(i),url:o()},t="response"in i?i.response:i.responseText;r(new h(t,e))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(a.method,a.url,!0),"include"===a.credentials&&(i.withCredentials=!0),"responseType"in i&&_.blob&&(i.responseType="blob"),a.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},16:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=r(33),a=n(o);t["default"]=function(e,t,r){return t in e?(0,a["default"])(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},65:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=n(o),i=r(74),s=n(i),u=r(88),l=n(u),d=r(87),c=n(d),f=r(7),p=a["default"].createClass({displayName:"Header",getInitialState:function(){return{search:this.props.keyword||""}},handleChange:function(e){this.setState({search:e.target.value})},clearInput:function(){this.setState({search:""}),this._input.focus()},upenter:function(e){e.preventDefault(),13==e.keyCode&&this.props.doSearch(this.state.search)},componentDidMount:function(){"search"==this.props.type&&this._input.focus()},render:function(){var e,t=this,r=this.state.search,n="";return"home"!=this.props.type?(e=a["default"].createElement("span",{className:s["default"].cancel,onClick:this.props.hideSearch},"取消"),""!=this.state.search&&(n=a["default"].createElement("img",{src:c["default"],className:s["default"].delete_icon,onClick:this.clearInput}))):e=a["default"].createElement(f.Link,{to:"/userbox"},a["default"].createElement("span",{className:s["default"].personal},a["default"].createElement("img",{src:l["default"]}))),a["default"].createElement("div",null,a["default"].createElement("div",{className:s["default"].header},a["default"].createElement("div",{className:s["default"].inputwrapper},a["default"].createElement("input",{type:"text",ref:function(e){return t._input=e},value:r,onChange:this.handleChange,placeholder:"搜索",onFocus:this.props.showSearch,onKeyUp:this.upenter}),n),e),a["default"].createElement("div",{className:s["default"].headerWrapper}))}});t["default"]=p},66:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(65),a=n(o);t["default"]=a["default"]},67:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=n(o),i=r(75),s=n(i),u=r(7),l=r(5),d=a["default"].createClass({displayName:"Recom",getInitialState:function(){return{search:this.props.keyword||"",stylekeyword:[],citykeyword:[]}},getKeyword:function(){var e=this;fetch(l.KEYWORD_URL).then(function(e){return e.json()}).then(function(t){var r=sessionStorage.stylekeyword=t.data&&t.data[0],n=sessionStorage.citykeyword=t.data&&t.data[1];e.setState({stylekeyword:r,citykeyword:n})})},componentDidMount:function(){var e,t,r=sessionStorage.stylekeyword,n=sessionStorage.citykeyword;if(void 0==r||void 0==n)this.getKeyword();else{var e=r.split(","),t=n.split(",");this.setState({stylekeyword:e,citykeyword:t})}},render:function(){var e,t,r,n=window.localStorage.searchHistory,o=this.state.citykeyword,i=this.state.stylekeyword;return"list"==this.props.from?(t=o&&o.map(function(e,t){return a["default"].createElement(u.Link,{to:"/catemap?keyword="+e,key:t},a["default"].createElement("span",null,e))}),r=i&&i.map(function(e,t){return a["default"].createElement(u.Link,{to:"/catemap?keyword="+e,key:t},a["default"].createElement("span",null,e))}),n&&(n=n.split(","),e=a["default"].createElement("div",{className:s["default"].history},a["default"].createElement("p",{className:s["default"].title},a["default"].createElement("i",{className:s["default"].icon_play}),"搜索历史"),a["default"].createElement("div",{className:s["default"].tags},n.map(function(e,t){return a["default"].createElement(u.Link,{to:"/catemap?keyword="+e,key:t},a["default"].createElement("span",null,e))}))))):"map"==this.props.from&&(t=o&&o.map(function(e,t){return a["default"].createElement(u.Link,{to:"/catelist?keyword="+e,key:t},a["default"].createElement("span",null,e))}),r=i&&i.map(function(e,t){return a["default"].createElement(u.Link,{to:"/catelist?keyword="+e,key:t},a["default"].createElement("span",null,e))}),n&&(n=n.split(","),e=a["default"].createElement("div",{className:s["default"].history},a["default"].createElement("p",{className:s["default"].title},a["default"].createElement("i",{className:s["default"].icon_play}),"搜索历史"),a["default"].createElement("div",{className:s["default"].tags},n.map(function(e,t){return a["default"].createElement(u.Link,{to:"/catelist?keyword="+e,key:t},a["default"].createElement("span",null,e))}))))),a["default"].createElement("div",{className:s["default"].Catemap},e,a["default"].createElement("div",{className:s["default"].play},a["default"].createElement("p",{className:s["default"].title},a["default"].createElement("i",{className:s["default"].icon_play}),"大家都玩啥"),a["default"].createElement("div",{className:s["default"].tags},t)),a["default"].createElement("div",null,a["default"].createElement("p",{className:s["default"].title},a["default"].createElement("i",{className:s["default"].icon_play}),"大家都去哪"),a["default"].createElement("div",{className:s["default"].tags},r)))}});t["default"]=d},68:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(67),a=n(o);t["default"]=a["default"]},74:function(e,t){e.exports={header:"Header__header___3VSYW",headerWrapper:"Header__headerWrapper___2BTHa",cancel:"Header__cancel___2drxP",personal:"Header__personal___1vVSR",inputwrapper:"Header__inputwrapper___aQJmS",delete_icon:"Header__delete_icon___2oVsX"}},75:function(e,t){e.exports={Catemap:"Recom__Catemap___2Sed_",title:"Recom__title___1fCkW",tags:"Recom__tags___3szIl"}},87:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABIUlEQVQ4T6WT4VHDMAyFn+wBYAPSCWhOizACnYB0EtIJKBuwASzgS0ZoJ6AMYItTzsq5uaSXA//KRdInPfmZ8M9D0/qu66qU0guAJwBVjp8AfDjnDnVd6/d4rgAhhGcArwDuFwa7ANgz89HiIyAXv61UtDPIAMhjdzc6T7kX51ytcgZACKEFoLr1aHCTUvoC8Kg/ROTde9+klL4L0oGZGwPoYh6K4NE5t1eIiPRaHGP8JKJtkXNi5o0BZEb7ANH/M8VDOjPTIsDG1sRSTtmoBFxJsOLcuTc5tpMMOTNztbjEydi2k/kl6jXGGHsiulvjAxH58d5vx2vMV6ku/JuRrKu6UUTapUm0MxE1s1Y2SHZlkx+TeeOcH1N78zGt0T/N+QUxyZ8RNHorigAAAABJRU5ErkJggg=="},88:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACEklEQVRYR+2WQW7TQBSG328as6Q3wEixw45UarIlnKDpCQg36A2a3gBOgDkB4QQN23hjdtRe1L1B2GYq/5VNitxoknkOSBVSvfU/733zz7z3BvLIHx45v/yfAEHQP/R9/0REgspBkEsY8+1nkRZtHW3tQK97fEbgHMDhZrKS/GiMuSiKdKkFaQUQhYMYwPtdwUmmK2PeaSHUAFE0HEPkq2pn5KerPDnTaNUAvWhYne9LTdD6XqxWrzR3QgXQavdrQopcZNli6gLWAkwhcu4K9uA/+f0qT0auNU8AKgfCcDDxgM8uO5v/SX7J8mTiWqMCeB30A/r+tSvYAwCR0yxbzFxrVABVEE0Tuk9GkR9Ztui7ktflqhFVmnX/n0PkjaMT/qLIKM+TVBNbDdCAiCFSDSLbd1OSY23yVg40s9V3otOpWm1tM4ElyVmeJ7Fm102NyoEwHPQhckmR2DXtomg4FfJEO5CcALYSJBkLMC9L/pn/gIw9YHz/RtBOxZ0A+9T/Ri9IPWNOdw2lrQDd7vHomeddtj3TTT3JpWfM0TYIK0Bdcp3Ote3Vsw9QdRxZnhzZ1loB2jQdLVBJfrBViRWgFw7mArzVBtfotr0P7A5Ew9TV8TRJm5pWDqzrfg7gRdtENv2uybi1CqqL+PzgYELPG4H8/QTXHcuNkAVFCpApbm9ne5Xhv9i5JoazE2qC/I3mCeAOeiT3IfosH0wAAAAASUVORK5CYII="},118:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=n(o),i=r(150),s=n(i),u=a["default"].createClass({displayName:"Dropload",getInitialState:function(){return{isLockDown:!1}},handleScroll:function(){var e=document.body.offsetHeight,t=document.body.scrollHeight,r=document.body.scrollTop;return!this.state.isLockDown&&40>=t-e-r?(this.setState({isLockDown:!0}),this.props.handleScroll()):void 0},componentDidMount:function(){window.addEventListener("scroll",this.handleScroll)},componentWillReceiveProps:function(){console.log(this.state.isLockDown),this.props.isEnd||this.setState({isLockDown:!1})},componentWillUnmount:function(){window.removeEventListener("scroll",this.handleScroll)},render:function(){var e;return this.props.isEnd?(e=a["default"].createElement("p",{className:s["default"].loadEnd},"已全部加载"),window.removeEventListener("scroll",this.handleScroll)):e=a["default"].createElement("p",{className:s["default"].loadNotEnd},"正在努力加载"),a["default"].createElement("div",null,a["default"].createElement("div",{className:s["default"].infinite_load},e))}});t["default"]=u},119:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(118),a=n(o);t["default"]=a["default"]},122:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Product=void 0;var o=r(1),a=n(o),i=r(152),s=n(i),u=r(7),l=r(170),d=n(l),c=t.Product=function(e){var t=e.product&&e.product.pic,r=e.product&&e.product.title,n=e.product&&e.product.name,o=e.product&&e.product.price,i=e.product&&e.product.id,l="/productinfo?id="+i,c=document.body.clientWidth;return a["default"].createElement("div",null,a["default"].createElement("div",{className:s["default"].product_container},a["default"].createElement(u.Link,{to:l}," ",a["default"].createElement("div",{className:s["default"].price_cover},a["default"].createElement("div",{className:s["default"].product_price},"￥",o,"起"))),a["default"].createElement("div",null,a["default"].createElement(d["default"],{height:200},a["default"].createElement("img",{alt:n,className:s["default"].product_cover,src:t+"!/fw/"+c}))),a["default"].createElement("div",{className:s["default"].product_info},a["default"].createElement("p",{className:s["default"].product_title}," ",a["default"].createElement(u.Link,{to:l},r)),a["default"].createElement("p",{className:s["default"].product_name},a["default"].createElement(u.Link,{to:l},n)))))};c.propTypes={},t["default"]=c},123:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(122),a=n(o);t["default"]=a["default"]},124:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Products=void 0;var o=r(123),a=n(o),i=r(1),s=n(i),u=r(153),l=(n(u),t.Products=function(e){return s["default"].createElement("div",null,e.list.map(function(e,t){return s["default"].createElement(a["default"],{product:e,key:t})}))});t["default"]=l},125:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(124),a=n(o);t["default"]=a["default"]},148:function(e,t,r){var n,o;!function(a,i){n=i,o="function"==typeof n?n.call(t,r,t,e):n,!(void 0!==o&&(e.exports=o))}(this,function(){function e(e,t){return function(r,n,o,a){r[e]?r[e](n,o,a):r[t]&&r[t]("on"+n,o)}}return{add:e("addEventListener","attachEvent"),remove:e("removeEventListener","detachEvent")}})},150:function(e,t){e.exports={infinite_load:"Dropload__infinite_load___168wk",loadNotEnd:"Dropload__loadNotEnd___dK26_"}},152:function(e,t){e.exports={product_container:"Product__product_container___3l_pN",product_cover:"Product__product_cover___WFXUO",product_info:"Product__product_info___2TsVN",product_title:"Product__product_title___1KhSz",product_name:"Product__product_name___3ah0B",product_price:"Product__product_price___2SMtC",price_cover:"Product__price_cover___1tq11"}},153:495,159:function(e,t,r){function n(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);return o(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),a(e,t,{leading:n,maxWait:t,trailing:s})}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var a=r(160),i="Expected a function";e.exports=n},160:720,170:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(1),u=r(79),l=u.findDOMNode,d=s.Children,c=s.Component,f=s.PropTypes,p=r(148),h=p.add,_=p.remove,m=r(173),y=r(159),E=r(172),v=r(171),w=function(e){function t(e){n(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.lazyLoadHandler=r.lazyLoadHandler.bind(r),e.throttle>0&&(e.debounce?r.lazyLoadHandler=m(r.lazyLoadHandler,e.throttle):r.lazyLoadHandler=y(r.lazyLoadHandler,e.throttle)),r.state={visible:!1},r}return a(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.getEventNode();this.lazyLoadHandler(),this.lazyLoadHandler.flush&&this.lazyLoadHandler.flush(),h(window,"resize",this.lazyLoadHandler),h(e,"scroll",this.lazyLoadHandler)}},{key:"componentWillReceiveProps",value:function(){this.state.visible||this.lazyLoadHandler()}},{key:"shouldComponentUpdate",value:function(e,t){return t.visible}},{key:"componentWillUnmount",value:function(){this.lazyLoadHandler.cancel&&this.lazyLoadHandler.cancel(),this.detachListeners()}},{key:"getEventNode",value:function(){return E(l(this))}},{key:"getOffset",value:function(){var e=this.props,t=e.offset,r=e.offsetVertical,n=e.offsetHorizontal,o=e.offsetTop,a=e.offsetBottom,i=e.offsetLeft,s=e.offsetRight,u=e.threshold,l=u||t,d=r||l,c=n||l;return{top:o||d,bottom:a||d,left:i||c,right:s||c}}},{key:"lazyLoadHandler",value:function(){var e=this.getOffset(),t=l(this),r=this.getEventNode();if(v(t,r,e)){var n=this.props.onContentVisible;this.setState({visible:!0}),this.detachListeners(),n&&n()}}},{key:"detachListeners",value:function(){var e=this.getEventNode();_(window,"resize",this.lazyLoadHandler),_(e,"scroll",this.lazyLoadHandler)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,n=e.height,o=e.width,a=this.state.visible,i={height:n,width:o},u="LazyLoad"+(a?" is-visible":"")+(r?" "+r:"");return s.createElement("div",{className:u,style:i},a&&d.only(t))}}]),t}(c);w.propTypes={children:f.node.isRequired,className:f.string,debounce:f.bool,height:f.oneOfType([f.string,f.number]),offset:f.number,offsetBottom:f.number,offsetHorizontal:f.number,offsetLeft:f.number,offsetRight:f.number,offsetTop:f.number,offsetVertical:f.number,threshold:f.number,throttle:f.number,width:f.oneOfType([f.string,f.number]),onContentVisible:f.func},w.defaultProps={debounce:!0,offset:0,offsetBottom:0,offsetHorizontal:0,offsetLeft:0,offsetRight:0,offsetTop:0,offsetVertical:0,throttle:250},e.exports=w},171:function(e,t){"use strict";var r=function(e){return null===e.offsetParent},n=function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},o=function(e,t,o){if(r(e))return!1;var a=void 0,i=void 0,s=void 0,u=void 0;if("undefined"==typeof t||t===window)a=window.pageYOffset,i=window.pageXOffset,s=a+window.innerHeight,u=i+window.innerWidth;else{var l=n(t);a=l.top,i=l.left,s=a+t.offsetHeight,u=i+t.offsetWidth}var d=n(e);return a<d.top+o.bottom+e.offsetHeight&&s>d.top-o.top&&i<d.left+o.right+e.offsetWidth&&u>d.left-o.left};e.exports=o},172:function(e,t){"use strict";var r=function(e,t){return"undefined"!=typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style[t]},n=function(e){return r(e,"overflow")+r(e,"overflow-y")+r(e,"overflow-x")},o=function(e){if(!(e instanceof HTMLElement))return window;for(var t=e;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(n(t)))return t;t=t.parentNode}return window};e.exports=o},173:720,209:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length<=0||void 0===arguments[0]?v:arguments[0],t=arguments[1],r=E[t.type];return r?r(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.doSort=t.searchMore=t.doSearch=void 0;var a,i=r(16),s=n(i),u=r(70),l=n(u),d=r(32),c=n(d);t["default"]=o;var f=r(9),p=n(f),h=r(5),_=t.doSearch=function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return function(r){return(0,p["default"])(h.SEARCH_URL+t+"&keyword="+e+"&source=1").then(function(e){return e.json()}).then(function(t){return r({type:h.SEARCH_DONE,search_products:t,pageNum:1,keyword:e})})}},m=t.searchMore=function(e,t,r){return function(n){return(0,p["default"])(h.SEARCH_URL+t+"&keyword="+e+"&source=1&sort="+r).then(function(e){return e.json()}).then(function(e){return n({type:h.CAT_MORE,search_products:e,pageNum:t})})}},y=t.doSort=function(e,t){return function(r){return(0,p["default"])(h.SEARCH_URL+"1&keyword="+e+"&source=1&sort="+t).then(function(e){return e.json()}).then(function(t){return r({type:h.DO_SORT,search_products:t,pageNum:1,keyword:e})})}},E=(t.actions={doSearch:_,searchMore:m,doSort:y},a={},(0,s["default"])(a,h.DO_SORT,function(e,t){return(0,c["default"])({},e,{pageNum:t.pageNum},{keyword:t.keyword},{search_products:t.search_products.data&&t.search_products.data.products||[]})}),(0,s["default"])(a,h.SEARCH_DONE,function(e,t){return(0,c["default"])({},e,{pageNum:t.pageNum},{keyword:t.keyword},{search_products:t.search_products.data&&t.search_products.data.products||[]})}),(0,s["default"])(a,h.CAT_MORE,function(e,t){if(!t.search_products.data)return(0,c["default"])({},e,{isEnd:!0});var r=t.search_products&&t.search_products.data?[].concat((0,l["default"])(e.search_products),(0,l["default"])(t.search_products.data.products)):[];return(0,c["default"])({},e,{search_products:r},{pageNum:t.pageNum})}),a),v={search_products:[],pageNum:1,isEnd:!1,keyword:""}},326:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Sequence=void 0;var o=r(1),a=n(o),i=r(484),s=n(i),u=t.Sequence=function(e){return a["default"].createElement("div",null,a["default"].createElement("div",{className:s["default"].seqtype},a["default"].createElement("a",{onClick:e.sort_h},a["default"].createElement("span",null,"按推荐度")),a["default"].createElement("span",null,"|"),a["default"].createElement("a",{onClick:e.sort_p},a["default"].createElement("span",null,"按价格",a["default"].createElement("i",null)))))};t["default"]=u},327:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(326),a=n(o);t["default"]=a["default"]},328:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=n(o),i=r(485),s=n(i),u=r(125),l=n(u),d=r(66),c=n(d),f=r(327),p=n(f),h=r(119),_=n(h),m=r(68),y=n(m),E=a["default"].createClass({displayName:"Catelist",contextTypes:{router:a["default"].PropTypes.object.isRequired},getInitialState:function(){return{open:!1,type:"",keyword:this.props.location.query.keyword,sort:this.props.location.query.sort}},showSearch:function(e){e.preventDefault(),this.context.router.push("/catemap")},hideSearch:function(e){e.preventDefault(),this.context.router.push("/")},sort_p:function(){"p"!=this.state.sort&&(this.props.doSort(this.state.keyword,"p"),this.setState({sort:"p"}))},sort_h:function(){"_h"!=this.state.sort&&(this.props.doSort(this.state.keyword,"_h"),this.setState({sort:"_h"}))},handleScroll:function(){return this.props.searchMore(this.state.keyword,this.props.catelist.pageNum+1)},componentDidMount:function(){this.props.catelist.keyword!=this.state.keyword&&this.props.doSearch(this.props.location.query.keyword,1)},render:function(){var e,t,r=this.props.catelist.search_products,n=this.state.keyword;return 0==r.length?(t="",e=a["default"].createElement("div",null,a["default"].createElement("div",{className:s["default"].no_result},a["default"].createElement("p",null,"没有符合您要求的产品，试试别的吧")),a["default"].createElement(y["default"],{from:"list"}))):(e=a["default"].createElement("div",null,a["default"].createElement(p["default"],{sort_p:this.sort_p,sort_h:this.sort_h}),a["default"].createElement(l["default"],{list:r})),t=1==this.props.catelist.isEnd||r.length<10?a["default"].createElement(_["default"],{handleScroll:this.handleScroll,isEnd:!0}):a["default"].createElement(_["default"],{handleScroll:this.handleScroll})),a["default"].createElement("div",{className:s["default"].homewrapper},a["default"].createElement(c["default"],{type:this.state.type,showSearch:this.showSearch,hideSearch:this.hideSearch,keyword:n}),e,t)}});t["default"]=E},329:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(328),a=n(o);t["default"]=a["default"]},351:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),a=r(209),i=r(329),s=n(i),u={doSearch:a.doSearch,searchMore:a.searchMore,doSort:a.doSort},l=function(e){return{catelist:e.catelist}};t["default"]=(0,o.connect)(l,u)(s["default"])},484:function(e,t){e.exports={seqtype:"Sequence__seqtype___3CXEz"}},485:function(e,t){e.exports={homewrapper:"Catelist__homewrapper___1FK5K",search:"Catelist__search___P8smQ",no_result:"Catelist__no_result___A369A"}}});